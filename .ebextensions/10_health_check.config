# Configure Application Load Balancer health check
# This ensures the ELB uses the dedicated /health/ endpoint that bypasses ALLOWED_HOSTS validation
option_settings:
  # Configure the health check path for the Application Load Balancer
  aws:elasticbeanstalk:environment:process:default:
    HealthCheckPath: /health/
    HealthCheckInterval: 15
    HealthCheckTimeout: 5
    HealthyThresholdCount: 3
    UnhealthyThresholdCount: 5
    Port: 80
    Protocol: HTTP
    
  # Enhanced health reporting
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
    EnhancedHealthAuthEnabled: true
    
  # Application health check URL (used by EB enhanced health)
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: /health/