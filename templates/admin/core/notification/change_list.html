{% extends "admin/change_list.html" %}
{% load i18n admin_urls static %}

{% block content_title %}
    <h1>{% trans 'Notification Dashboard' %}</h1>

    {# Statistics Dashboard Cards #}
    <div style="display: flex; gap: 20px; margin: 20px 0; flex-wrap: wrap;">
        {# Total Notifications Card #}
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; min-width: 180px; flex: 1;">
            <div style="opacity: 0.9; font-size: 13px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">
                Total Notifications
            </div>
            <div style="font-size: 2.5em; font-weight: 700; line-height: 1;">
                {{ stats.total|default:0 }}
            </div>
            <div style="opacity: 0.8; font-size: 11px; margin-top: 8px;">
                All time
            </div>
        </div>

        {# Unread Card #}
        <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 20px; border-radius: 8px; min-width: 180px; flex: 1;">
            <div style="opacity: 0.9; font-size: 13px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">
                Unread
            </div>
            <div style="font-size: 2.5em; font-weight: 700; line-height: 1;">
                {{ stats.unread|default:0 }}
            </div>
            <div style="opacity: 0.8; font-size: 11px; margin-top: 8px;">
                Awaiting action
            </div>
        </div>

        {# Urgent Card #}
        <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; padding: 20px; border-radius: 8px; min-width: 180px; flex: 1;">
            <div style="opacity: 0.9; font-size: 13px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">
                Urgent
            </div>
            <div style="font-size: 2.5em; font-weight: 700; line-height: 1;">
                {{ stats.urgent|default:0 }}
            </div>
            <div style="opacity: 0.8; font-size: 11px; margin-top: 8px;">
                High priority
            </div>
        </div>

        {# Email Sent Card #}
        <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 20px; border-radius: 8px; min-width: 180px; flex: 1;">
            <div style="opacity: 0.9; font-size: 13px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">
                Email Sent
            </div>
            <div style="font-size: 2.5em; font-weight: 700; line-height: 1;">
                {{ stats.email_sent|default:0 }}
            </div>
            <div style="opacity: 0.8; font-size: 11px; margin-top: 8px;">
                ğŸ“§ Delivered via email
            </div>
        </div>

        {# SMS Sent Card #}
        <div style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 20px; border-radius: 8px; min-width: 180px; flex: 1;">
            <div style="opacity: 0.9; font-size: 13px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">
                SMS Sent
            </div>
            <div style="font-size: 2.5em; font-weight: 700; line-height: 1;">
                {{ stats.sms_sent|default:0 }}
            </div>
            <div style="opacity: 0.8; font-size: 11px; margin-top: 8px;">
                ğŸ“± Delivered via SMS
            </div>
        </div>
    </div>

    {# Quick Actions Section #}
    <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 15px; margin: 20px 0;">
        <h3 style="margin: 0 0 10px 0; font-size: 14px; color: #495057;">
            ğŸ“Š Quick Actions
        </h3>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <a href="{% url 'admin:core_notification_add' %}"
               style="background: #007bff; color: white; padding: 8px 16px; border-radius: 4px; text-decoration: none; font-size: 13px;">
                â• Create Notification
            </a>
            <a href="?read__exact=0"
               style="background: #6c757d; color: white; padding: 8px 16px; border-radius: 4px; text-decoration: none; font-size: 13px;">
                ğŸ‘ï¸ View Unread
            </a>
            <a href="?priority__exact=URGENT"
               style="background: #dc3545; color: white; padding: 8px 16px; border-radius: 4px; text-decoration: none; font-size: 13px;">
                ğŸš¨ View Urgent
            </a>
            <a href="{% url 'admin:core_notificationdeliverylog_changelist' %}"
               style="background: #28a745; color: white; padding: 8px 16px; border-radius: 4px; text-decoration: none; font-size: 13px;">
                ğŸ“ View Delivery Logs
            </a>
        </div>
    </div>

    {# Performance Insights #}
    {% if stats.total > 0 %}
    <div style="background: #e7f3ff; border-left: 4px solid #007bff; padding: 15px; margin: 20px 0; border-radius: 4px;">
        <h3 style="margin: 0 0 10px 0; font-size: 14px; color: #004085;">
            ğŸ’¡ Performance Insights
        </h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; font-size: 13px; color: #004085;">
            <div>
                <strong>Email Delivery Rate:</strong>
                {% widthratio stats.email_sent stats.total 100 %}%
            </div>
            <div>
                <strong>SMS Delivery Rate:</strong>
                {% widthratio stats.sms_sent stats.total 100 %}%
            </div>
            <div>
                <strong>Unread Rate:</strong>
                {% widthratio stats.unread stats.total 100 %}%
            </div>
            <div>
                <strong>Urgent Priority:</strong>
                {% widthratio stats.urgent stats.total 100 %}%
            </div>
        </div>
    </div>
    {% endif %}
{% endblock %}

{% block content %}
    {{ block.super }}
{% endblock %}
