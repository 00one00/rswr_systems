{% extends "emails/base.html" %}

{% block email_title %}Batch Repairs Approved - {{ unit_number }}{% endblock %}

{% block preheader %}{{ repairs_count }} repair{% if repairs_count > 1 %}s{% endif %} for unit {{ unit_number }} have been approved.{% endblock %}

{% block content %}
<!-- Success Badge -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
    <tr>
        <td style="text-align: center; padding-bottom: 20px;">
            <div style="display: inline-block; background-color: {{ branding.success_color }}; color: white; padding: 10px 20px; border-radius: {{ branding.button_border_radius }}px; font-family: {{ branding.heading_font }}; font-size: 14px; font-weight: bold; letter-spacing: 0.5px;">
                âœ“ BATCH APPROVED
            </div>
        </td>
    </tr>
</table>

<!-- Main Heading -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
    <tr>
        <td style="padding-bottom: 20px;">
            <h1 style="margin: 0; color: {{ branding.text_color }}; font-family: {{ branding.heading_font }}; font-size: 24px; font-weight: bold; line-height: 1.3;">
                Multiple Repairs Approved
            </h1>
            <p style="margin: 10px 0 0 0; color: #666666; font-family: {{ branding.body_font }}; font-size: 16px; line-height: 24px;">
                Good news! We've approved {{ repairs_count }} windshield repair{% if repairs_count > 1 %}s{% endif %} for unit {{ unit_number }}.
            </p>
        </td>
    </tr>
</table>

<!-- Batch Summary Card -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background: linear-gradient(135deg, {{ branding.primary_color }} 0%, {{ branding.secondary_color }} 100%); border-radius: 8px; margin-bottom: 30px;">
    <tr>
        <td style="padding: 30px; text-align: center;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                <tr>
                    <td style="padding-bottom: 20px;">
                        <div style="font-size: 48px; color: white; font-family: {{ branding.heading_font }}; font-weight: bold; line-height: 1;">
                            {{ repairs_count }}
                        </div>
                        <div style="font-size: 14px; color: rgba(255,255,255,0.9); margin-top: 5px; text-transform: uppercase; letter-spacing: 1px;">
                            Break{% if repairs_count > 1 %}s{% endif %} Approved
                        </div>
                    </td>
                </tr>
                <tr>
                    <td style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 20px;">
                        <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                            <tr>
                                <td width="50%" style="padding: 10px; text-align: center; border-right: 1px solid rgba(255,255,255,0.3);">
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.8); margin-bottom: 5px;">UNIT NUMBER</div>
                                    <div style="font-size: 20px; color: white; font-weight: bold;">{{ unit_number }}</div>
                                </td>
                                <td width="50%" style="padding: 10px; text-align: center;">
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.8); margin-bottom: 5px;">TOTAL COST</div>
                                    <div style="font-size: 20px; color: white; font-weight: bold;">${{ total_cost }}</div>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- Individual Repairs List -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-bottom: 30px;">
    <tr>
        <td style="padding-bottom: 15px;">
            <h2 style="margin: 0; color: {{ branding.text_color }}; font-family: {{ branding.heading_font }}; font-size: 18px; font-weight: bold;">
                Approved Repairs
            </h2>
        </td>
    </tr>
    {% for repair in repairs %}
    <tr>
        <td style="padding-bottom: 15px;">
            <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #f8f9fa; border-radius: 8px; border-left: 4px solid {{ branding.success_color }};">
                <tr>
                    <td style="padding: 20px;">
                        <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                            <tr>
                                <td>
                                    <div style="display: inline-block; background-color: {{ branding.primary_color }}; color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: bold; margin-bottom: 10px;">
                                        BREAK #{{ forloop.counter }}
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td style="font-family: {{ branding.body_font }}; font-size: 14px; line-height: 20px; color: #555; padding: 5px 0;">
                                    <strong style="color: {{ branding.text_color }};">Repair ID:</strong> #{{ repair.id }}
                                </td>
                            </tr>
                            <tr>
                                <td style="font-family: {{ branding.body_font }}; font-size: 14px; line-height: 20px; color: #555; padding: 5px 0;">
                                    <strong style="color: {{ branding.text_color }};">Description:</strong> {{ repair.break_description }}
                                </td>
                            </tr>
                            <tr>
                                <td style="font-family: {{ branding.body_font }}; font-size: 14px; line-height: 20px; color: #555; padding: 5px 0;">
                                    <strong style="color: {{ branding.text_color }};">Cost:</strong> <span style="color: {{ branding.success_color }}; font-weight: bold;">${{ repair.total_cost }}</span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    {% endfor %}
</table>

<!-- Pricing Breakdown (if applicable) -->
{% if pricing_note %}
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-bottom: 30px;">
    <tr>
        <td style="padding: 15px; background-color: #f0f8ff; border-left: 4px solid {{ branding.secondary_color }}; border-radius: 0 4px 4px 0;">
            <p style="margin: 0; font-family: {{ branding.body_font }}; font-size: 13px; line-height: 20px; color: #555555;">
                <strong style="color: {{ branding.text_color }};">ðŸ’¡ Pricing Note:</strong>
                {{ pricing_note }}
            </p>
        </td>
    </tr>
</table>
{% endif %}

<!-- Next Steps Section -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-bottom: 30px;">
    <tr>
        <td style="padding-bottom: 15px;">
            <h2 style="margin: 0; color: {{ branding.text_color }}; font-family: {{ branding.heading_font }}; font-size: 18px; font-weight: bold;">
                What Happens Next?
            </h2>
        </td>
    </tr>
    <tr>
        <td>
            <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                <tr>
                    <td style="padding: 12px 0; font-family: {{ branding.body_font }}; font-size: 14px; line-height: 22px; color: #666666;">
                        <span style="display: inline-block; width: 24px; height: 24px; background-color: {{ branding.primary_color }}; color: white; border-radius: 50%; text-align: center; line-height: 24px; font-weight: bold; margin-right: 10px;">1</span>
                        A technician will be assigned to your repairs
                    </td>
                </tr>
                <tr>
                    <td style="padding: 12px 0; font-family: {{ branding.body_font }}; font-size: 14px; line-height: 22px; color: #666666;">
                        <span style="display: inline-block; width: 24px; height: 24px; background-color: {{ branding.primary_color }}; color: white; border-radius: 50%; text-align: center; line-height: 24px; font-weight: bold; margin-right: 10px;">2</span>
                        All breaks will be repaired during the same visit
                    </td>
                </tr>
                <tr>
                    <td style="padding: 12px 0; font-family: {{ branding.body_font }}; font-size: 14px; line-height: 22px; color: #666666;">
                        <span style="display: inline-block; width: 24px; height: 24px; background-color: {{ branding.primary_color }}; color: white; border-radius: 50%; text-align: center; line-height: 24px; font-weight: bold; margin-right: 10px;">3</span>
                        You'll receive updates as work progresses
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- CTA Button -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-bottom: 20px;">
    <tr>
        <td style="text-align: center; padding: 20px 0;">
            <a href="{{ view_repairs_url }}" style="background-color: {{ branding.primary_color }}; color: white; text-decoration: none; padding: 14px 35px; border-radius: {{ branding.button_border_radius }}px; font-family: {{ branding.heading_font }}; font-size: 16px; font-weight: bold; display: inline-block;">
                View All Repair Details
            </a>
        </td>
    </tr>
</table>

<!-- Support Note -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
    <tr>
        <td style="padding: 20px; background-color: #f0f8ff; border-left: 4px solid {{ branding.secondary_color }}; border-radius: 0 4px 4px 0;">
            <p style="margin: 0; font-family: {{ branding.body_font }}; font-size: 13px; line-height: 20px; color: #555555;">
                <strong style="color: {{ branding.text_color }};">Questions?</strong>
                {% if branding.support_email %}
                Contact us at <a href="mailto:{{ branding.support_email }}" style="color: {{ branding.primary_color }}; text-decoration: none;">{{ branding.support_email }}</a>
                {% endif %}
                {% if branding.support_phone %}
                {% if branding.support_email %} or call {% else %}Call us at {% endif %}
                <a href="tel:{{ branding.support_phone }}" style="color: {{ branding.primary_color }}; text-decoration: none;">{{ branding.support_phone }}</a>
                {% endif %}
            </p>
        </td>
    </tr>
</table>
{% endblock %}

{% block unsubscribe_url %}/app/settings/notifications/{% endblock %}
